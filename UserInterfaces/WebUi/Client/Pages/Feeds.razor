@page "/feeds"

<style>
    .content {
        padding-top: 0;
    }

    .accordion .card-header:after {
        font-family: 'Icons';
        content: "\e09d";
        float: right;
    }

    .accordion .card-header.collapsed:after {
        font-family: 'Icons';
        content: "\e0aa";
        float: right;
    }
</style>

@if (_feedChannels == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="d-flex flex-wrap h-100">
        <Split>
            <SplitArea>
                <div class="h-100" style="background-color:beige">

                    <div class="card h-100">
                        <div class="card-header">
                            <h4 class="text-center">Feed Channels</h4>
                            <div class="d-flex justify-content-center">
                                <a href="#" class="m-2 btn btn-primary">Add</a>
                                <a href="#" class="m-2 btn btn-primary">Refresh</a>
                                <a href="#" class="m-2 btn btn-primary">Remove</a>
                                <a href="#" class="m-2 btn btn-primary">Search</a>
                            </div>
                        </div>

                        <div class="card-body">


                            <div class="accordion">
                                <div class="card mb-0">
                                    @foreach (var feedChannel in _feedChannels)
                                    {
                                        <div class="card-header collapsed" data-toggle="collapse" 
                                             href="#a@(feedChannel.Id)">
                                            <button class="btn btn-link"><h5>@feedChannel.Title</h5></button>
                                        </div>
                                        <div id="a@(feedChannel.Id)" class="card-body collapse">
                                            @foreach (var feedItem in feedChannel.FeedItems)
                                            {
                                                <p class="pl-4">
                                                    <a href="feeds" role="button" 
                                                       @onclick="@(e => ItemSelected(e, feedItem))">
                                                        @feedItem.Title
                                                    </a>
                                                </p>
                                            }
                                        </div>
                                    }
                                </div>
                            </div>

                        </div>


                        <div class="card-footer text-right text-muted">
                            Total @(_feedChannels
                                .Select(feedChannel => feedChannel.FeedItems.Count)
                                .Aggregate((sum,next) => sum+next)) feeds
                        </div>
                    </div>



                </div>
            </SplitArea>

            <SplitArea>
                <div class="h-100" style="background-color:ghostwhite">
                    <div>
                        I am content
                    </div>
                </div>
            </SplitArea>
        </Split>
    </div>
}
